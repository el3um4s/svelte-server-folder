var app=function(){"use strict";function t(){}const n=t=>t;function e(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(e)}function s(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}const a="undefined"!=typeof window;let l=a?()=>window.performance.now():()=>Date.now(),c=a?t=>requestAnimationFrame(t):t;const d=new Set;function u(t){d.forEach((n=>{n.c(t)||(d.delete(n),n.f())})),0!==d.size&&c(u)}function f(t,n){t.appendChild(n)}function p(t){if(!t)return document;const n=t.getRootNode?t.getRootNode():t.ownerDocument;return n&&n.host?n:t.ownerDocument}function m(t){const n=v("style");return function(t,n){f(t.head||t,n)}(p(t),n),n.sheet}function h(t,n,e){t.insertBefore(n,e||null)}function g(t){t.parentNode.removeChild(t)}function v(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function y(){return w(" ")}function $(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function b(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function x(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}const k=new Map;let _,C=0;function E(t,n,e,o,r,s,i,a=0){const l=16.666/o;let c="{\n";for(let t=0;t<=1;t+=l){const o=n+(e-n)*s(t);c+=100*t+`%{${i(o,1-o)}}\n`}const d=c+`100% {${i(e,1-e)}}\n}`,u=`__svelte_${function(t){let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}(d)}_${a}`,f=p(t),{stylesheet:h,rules:g}=k.get(f)||function(t,n){const e={stylesheet:m(n),rules:{}};return k.set(t,e),e}(f,t);g[u]||(g[u]=!0,h.insertRule(`@keyframes ${u} ${d}`,h.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${u} ${o}ms linear ${r}ms 1 both`,C+=1,u}function F(t,n){const e=(t.style.animation||"").split(", "),o=e.filter(n?t=>t.indexOf(n)<0:t=>-1===t.indexOf("__svelte")),r=e.length-o.length;r&&(t.style.animation=o.join(", "),C-=r,C||c((()=>{C||(k.forEach((t=>{const{stylesheet:n}=t;let e=n.cssRules.length;for(;e--;)n.deleteRule(e);t.rules={}})),k.clear())})))}function D(t){_=t}function M(t){(function(){if(!_)throw new Error("Function called outside component initialization");return _})().$$.on_mount.push(t)}const j=[],W=[],B=[],P=[],S=Promise.resolve();let T=!1;function L(t){B.push(t)}const N=new Set;let R,z=0;function O(){const t=_;do{for(;z<j.length;){const t=j[z];z++,D(t),A(t.$$)}for(D(null),j.length=0,z=0;W.length;)W.pop()();for(let t=0;t<B.length;t+=1){const n=B[t];N.has(n)||(N.add(n),n())}B.length=0}while(j.length);for(;P.length;)P.pop()();T=!1,N.clear(),D(t)}function A(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(L)}}function H(t,n,e){t.dispatchEvent(function(t,n,e=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,e,!1,n),o}(`${n?"intro":"outro"}${e}`))}const V=new Set;let I;function U(){I={r:0,c:[],p:I}}function q(){I.r||r(I.c),I=I.p}function Y(t,n){t&&t.i&&(V.delete(t),t.i(n))}function G(t,n,e,o){if(t&&t.o){if(V.has(t))return;V.add(t),I.c.push((()=>{V.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}const J={duration:0};function K(e,o,i,a){let f=o(e,i),p=a?0:1,m=null,h=null,g=null;function v(){g&&F(e,g)}function w(t,n){const e=t.b-p;return n*=Math.abs(e),{a:p,b:t.b,d:e,duration:n,start:t.start,end:t.start+n,group:t.group}}function y(o){const{delay:s=0,duration:i=300,easing:a=n,tick:y=t,css:$}=f||J,b={start:l()+s,b:o};o||(b.group=I,I.r+=1),m||h?h=b:($&&(v(),g=E(e,p,o,i,s,a,$)),o&&y(0,1),m=w(b,i),L((()=>H(e,o,"start"))),function(t){let n;0===d.size&&c(u),new Promise((e=>{d.add(n={c:t,f:e})}))}((t=>{if(h&&t>h.start&&(m=w(h,i),h=null,H(e,m.b,"start"),$&&(v(),g=E(e,p,m.b,m.duration,0,a,f.css))),m)if(t>=m.end)y(p=m.b,1-p),H(e,m.b,"end"),h||(m.b?v():--m.group.r||r(m.group.c)),m=null;else if(t>=m.start){const n=t-m.start;p=m.a+m.d*a(n/m.duration),y(p,1-p)}return!(!m&&!h)})))}return{run(t){s(f)?(R||(R=Promise.resolve(),R.then((()=>{R=null}))),R).then((()=>{f=f(),y(t)})):y(t)},end(){v(),m=h=null}}}function Q(t,n){-1===t.$$.dirty[0]&&(j.push(t),T||(T=!0,S.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function X(n,i,a,l,c,d,u,f=[-1]){const p=_;D(n);const m=n.$$={fragment:null,ctx:null,props:d,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(p?p.$$.context:[])),callbacks:o(),dirty:f,skip_bound:!1,root:i.target||p.$$.root};u&&u(m.root);let h=!1;if(m.ctx=a?a(n,i.props||{},((t,e,...o)=>{const r=o.length?o[0]:e;return m.ctx&&c(m.ctx[t],m.ctx[t]=r)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](r),h&&Q(n,t)),e})):[],m.update(),h=!0,r(m.before_update),m.fragment=!!l&&l(m.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);m.fragment&&m.fragment.l(t),t.forEach(g)}else m.fragment&&m.fragment.c();i.intro&&Y(n.$$.fragment),function(t,n,o,i){const{fragment:a,on_mount:l,on_destroy:c,after_update:d}=t.$$;a&&a.m(n,o),i||L((()=>{const n=l.map(e).filter(s);c?c.push(...n):r(n),t.$$.on_mount=[]})),d.forEach(L)}(n,i.target,i.anchor,i.customElement),O()}D(p)}function Z(t){const n=t-1;return n*n*n+1}function tt(t,{delay:n=0,duration:e=400,easing:o=Z}={}){const r=getComputedStyle(t),s=+r.opacity,i=parseFloat(r.height),a=parseFloat(r.paddingTop),l=parseFloat(r.paddingBottom),c=parseFloat(r.marginTop),d=parseFloat(r.marginBottom),u=parseFloat(r.borderTopWidth),f=parseFloat(r.borderBottomWidth);return{delay:n,duration:e,easing:o,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*s};height: ${t*i}px;padding-top: ${t*a}px;padding-bottom: ${t*l}px;margin-top: ${t*c}px;margin-bottom: ${t*d}px;border-top-width: ${t*u}px;border-bottom-width: ${t*f}px;`}}const nt=async()=>{console.log("Registering service worker...");try{const t=await navigator.serviceWorker.register("sw.js",{scope:"./"});console.info("Registered service worker on "+t.scope)}catch(t){console.warn("Failed to register service worker: ",t)}},et=async()=>{if(navigator.serviceWorker&&!navigator.serviceWorker.controller){const t=new Promise((t=>navigator.serviceWorker.addEventListener("controllerchange",t,{once:!0}))),n=function(t,n){let e=-1;const o=new Promise(((o,r)=>{e=self.setTimeout((()=>r(n)),t)}));return{promise:o,cancel:()=>self.clearTimeout(e)}}(4e3,"SW ready timeout");await Promise.race([t,n.promise]),n.cancel()}},ot=t=>{navigator.serviceWorker.controller.postMessage(t)},rt=async()=>{const t=await(async()=>await window.showDirectoryPicker())();return await et(),ot({type:"host-start"}),t},st=async(t,n)=>{n&&!n.endsWith("/")&&(n+="/");let e=`\n<!DOCTYPE html>\n<html>\n${(t=>`<head>\n\t<meta charset="utf-8">\n\t<title>Directory listing for ${t||"/"}</title>\n</head>`)(n)}\n\n<body>\n  <main>\n  ${(t=>`<h1>Directory listing for ${t||"/"}</h1>`)(n)}\n\n  <div class="list">\n  ${(t=>"/"!=(t||"/")?'<div class="item go-up"><div class="icon">\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">\n  <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />\n</svg></div><div class="link"><a href="../">../</a></div></div>':"")(n)}\n  ${await(async t=>{let n="";for await(const[e,o]of t.entries()){const t="directory"===o.kind?"/":"",r="index.html"===e.toLowerCase();n+=`<div class="item ${r?"index":""}"><div class="icon">${"directory"===o.kind?'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">\n  <path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" />\n</svg>':r?'\n<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />\n</svg>':'\n<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />\n</svg>'}</div><div class="link"><a href="${e}${t}">${e}${t}</a></div></div>`}return n})(t)}\n  </div>\n  </main>\n</body>\n\n\n<style>\n    body { \n        display: grid;\n        justify-content: center;\n        justify-items: start;\n        background-color: #DFCDC3;\n        color: #333242;\n        box-sizing: border-box;\n    }\n\n    main {\n        width: 60ch;\n        max-width: 60ch;\n    }\n\n    .list { \n        display: grid;\n        justify-content: start;\n        justify-items: start;\n        padding: 4px;\n        grid-row-gap: 8px;\n    }\n\n    .item { \n        display: grid;\n        align-items: center;\n        justify-items: start;\n        grid-template-columns: 32px auto;\n        padding: 4px;\n    }\n\n    .go-up {\n        margin-bottom: 16px;\n    }\n\n    a {\n        color: #333242;\n        text-decoration: none;\n    }\n\n    .index {\n        font-weight: 600;\n        border: 1px dotted #333242;\n        background-color: #DCB454;\n    }\n    a:hover, .item:hover {\n        background-color: #DCB454;\n        color: #1F6435;\n    }\n\n    .icon {\n        margin-right:4px;\n    }\n    svg {\n        width: 24px;\n        height: 24px;\n    }\n</style>\n\n\n</html>`;return new Blob([e],{type:"text/html"})};function it(n){let e,o,r,s,i;return{c(){e=v("button"),e.textContent="Open in new tab"},m(t,o){h(t,e,o),r=!0,s||(i=$(e,"click",n[6]),s=!0)},p:t,i(t){r||(L((()=>{o||(o=K(e,tt,{},!0)),o.run(1)})),r=!0)},o(t){o||(o=K(e,tt,{},!1)),o.run(0),r=!1},d(t){t&&g(e),t&&o&&o.end(),s=!1,i()}}}function at(t){let n,e,o,r,s,i,a=t[4]&&lt(t);return{c(){var t,r,s,i;n=v("div"),e=v("div"),e.textContent="Server Information",o=y(),a&&a.c(),t=e,r="cursor",i=!1,null===(s="pointer")?t.style.removeProperty(r):t.style.setProperty(r,s,i?"important":""),b(n,"class","server-information svelte-emn7o0")},m(l,c){h(l,n,c),f(n,e),f(n,o),a&&a.m(n,null),r=!0,s||(i=$(e,"click",t[7]),s=!0)},p(t,e){t[4]?a?(a.p(t,e),16&e&&Y(a,1)):(a=lt(t),a.c(),Y(a,1),a.m(n,null)):a&&(U(),G(a,1,1,(()=>{a=null})),q())},i(t){r||(Y(a),r=!0)},o(t){G(a),r=!1},d(t){t&&g(n),a&&a.d(),s=!1,i()}}}function lt(t){let n,e,o,r,s,i,a,l,c,d,u,p,m,$,k,_,C,E,F,D,M,j,W=t[0]?.name+"";return{c(){n=v("div"),e=v("div"),e.textContent="folderName",o=y(),r=v("div"),s=w(W),i=y(),a=v("div"),a.textContent="clientID",l=y(),c=v("div"),d=w(t[3]),u=y(),p=v("div"),p.textContent="swScope",m=y(),$=v("div"),k=w(t[2]),_=y(),C=v("div"),C.textContent="hostName",E=y(),F=v("div"),D=w(t[1]),b(e,"class","svelte-emn7o0"),b(r,"class","svelte-emn7o0"),b(a,"class","svelte-emn7o0"),b(c,"class","svelte-emn7o0"),b(p,"class","svelte-emn7o0"),b($,"class","svelte-emn7o0"),b(C,"class","svelte-emn7o0"),b(F,"class","svelte-emn7o0"),b(n,"class","handled svelte-emn7o0")},m(t,g){h(t,n,g),f(n,e),f(n,o),f(n,r),f(r,s),f(n,i),f(n,a),f(n,l),f(n,c),f(c,d),f(n,u),f(n,p),f(n,m),f(n,$),f($,k),f(n,_),f(n,C),f(n,E),f(n,F),f(F,D),j=!0},p(t,n){(!j||1&n)&&W!==(W=t[0]?.name+"")&&x(s,W),(!j||8&n)&&x(d,t[3]),(!j||4&n)&&x(k,t[2]),(!j||2&n)&&x(D,t[1])},i(t){j||(L((()=>{M||(M=K(n,tt,{},!0)),M.run(1)})),j=!0)},o(t){M||(M=K(n,tt,{},!1)),M.run(0),j=!1},d(t){t&&g(n),t&&M&&M.end()}}}function ct(t){let n,e,o,r,s,i,a,l,c,d,u,p,m=t[0]&&it(t),w=t[0]&&at(t);return{c(){n=v("main"),e=v("section"),o=v("header"),o.innerHTML='<h1>Svelte Serve Folder</h1> \n      <div class="version svelte-emn7o0">Version: 0.0.6</div> \n      <div>Serve a local folder of files in your browser for easy testing without\n        having to run a server.</div>',r=y(),s=v("article"),i=v("div"),a=v("button"),a.textContent="Pick Folder",l=y(),m&&m.c(),c=y(),w&&w.c(),b(o,"class","svelte-emn7o0"),b(i,"class","buttons"),b(s,"class","svelte-emn7o0"),b(e,"class","folder-handle svelte-emn7o0")},m(g,v){h(g,n,v),f(n,e),f(e,o),f(e,r),f(e,s),f(s,i),f(i,a),f(i,l),m&&m.m(i,null),f(s,c),w&&w.m(s,null),d=!0,u||(p=$(a,"click",t[5]),u=!0)},p(t,[n]){t[0]?m?(m.p(t,n),1&n&&Y(m,1)):(m=it(t),m.c(),Y(m,1),m.m(i,null)):m&&(U(),G(m,1,1,(()=>{m=null})),q()),t[0]?w?(w.p(t,n),1&n&&Y(w,1)):(w=at(t),w.c(),Y(w,1),w.m(s,null)):w&&(U(),G(w,1,1,(()=>{w=null})),q())},i(t){d||(Y(m),Y(w),d=!0)},o(t){G(m),G(w),d=!1},d(t){t&&g(n),m&&m.d(),w&&w.d(),u=!1,p()}}}function dt(t,n,e){let o=null,r="",s=null,i="";M((async()=>{await nt()})),window.addEventListener("unload",(()=>{ot({type:"host-stop",hostName:r})})),navigator.serviceWorker.addEventListener("message",(t=>{switch(t.data.type){case"start-ok":n=t.data,e(1,r=n.hostName),e(2,s=n.scope),e(3,i=n.clientId);break;case"fetch":(async(t,n)=>{try{let e=decodeURIComponent(n.data.url);e.endsWith("/")&&(e=e.substr(0,e.length-1));const o=e.indexOf("?");-1!==o&&(e=e.substr(0,o));const r=e.split("/");let s=t;for(let t=0,n=r.length-1;t<n;++t){const n=r[t];s=await s.getDirectoryHandle(n)}let i=null;const a=r[r.length-1];if(a)try{const t=await s.getDirectoryHandle(a);i=await st(t,e)}catch{const t=await s.getFileHandle(a);i=await t.getFile()}else i=await st(s,e);n.data.port.postMessage({type:"ok",file:i})}catch(t){console.error(`Unable to serve file '${n.data.url}': `,t),n.data.port.postMessage({type:"not-found"})}})(o,t);break;default:console.warn(`Unknown message from SW '${t.data.type}'`)}var n}));let a=!1;return[o,r,s,i,a,async()=>{e(0,o=await rt())},()=>{globalThis.open(`${s}${r}/`,"_blank")},()=>e(4,a=!a)]}const ut=new class extends class{$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),X(this,t,dt,ct,i,{})}}({target:document.body});return ut}();
//# sourceMappingURL=bundle.js.map
