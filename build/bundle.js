var app=function(){"use strict";function t(){}const n=t=>t;function e(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}let a;function c(t,n){return a||(a=document.createElement("a")),a.href=n,t===a.href}const l="undefined"!=typeof window;let u=l?()=>window.performance.now():()=>Date.now(),d=l?t=>requestAnimationFrame(t):t;const f=new Set;function p(t){f.forEach((n=>{n.c(t)||(f.delete(n),n.f())})),0!==f.size&&d(p)}function m(t,n){t.appendChild(n)}function h(t){if(!t)return document;const n=t.getRootNode?t.getRootNode():t.ownerDocument;return n&&n.host?n:t.ownerDocument}function g(t){const n=$("style");return function(t,n){m(t.head||t,n)}(h(t),n),n.sheet}function v(t,n,e){t.insertBefore(n,e||null)}function w(t){t.parentNode.removeChild(t)}function $(t){return document.createElement(t)}function y(t){return document.createTextNode(t)}function b(){return y(" ")}function x(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function k(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function j(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function C(t,n,e,o){null===e?t.style.removeProperty(n):t.style.setProperty(n,e,o?"important":"")}const _=new Map;let E,F=0;function D(t,n,e,o,r,i,s,a=0){const c=16.666/o;let l="{\n";for(let t=0;t<=1;t+=c){const o=n+(e-n)*i(t);l+=100*t+`%{${s(o,1-o)}}\n`}const u=l+`100% {${s(e,1-e)}}\n}`,d=`__svelte_${function(t){let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}(u)}_${a}`,f=h(t),{stylesheet:p,rules:m}=_.get(f)||function(t,n){const e={stylesheet:g(n),rules:{}};return _.set(t,e),e}(f,t);m[d]||(m[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${d} ${o}ms linear ${r}ms 1 both`,F+=1,d}function M(t,n){const e=(t.style.animation||"").split(", "),o=e.filter(n?t=>t.indexOf(n)<0:t=>-1===t.indexOf("__svelte")),r=e.length-o.length;r&&(t.style.animation=o.join(", "),F-=r,F||d((()=>{F||(_.forEach((t=>{const{stylesheet:n}=t;let e=n.cssRules.length;for(;e--;)n.deleteRule(e);t.rules={}})),_.clear())})))}function W(t){E=t}function B(t){(function(){if(!E)throw new Error("Function called outside component initialization");return E})().$$.on_mount.push(t)}const P=[],S=[],T=[],L=[],N=Promise.resolve();let O=!1;function R(t){T.push(t)}const z=new Set;let A,H=0;function V(){const t=E;do{for(;H<P.length;){const t=P[H];H++,W(t),I(t.$$)}for(W(null),P.length=0,H=0;S.length;)S.pop()();for(let t=0;t<T.length;t+=1){const n=T[t];z.has(n)||(z.add(n),n())}T.length=0}while(P.length);for(;L.length;)L.pop()();O=!1,z.clear(),W(t)}function I(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(R)}}function U(t,n,e){t.dispatchEvent(function(t,n,e=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,e,!1,n),o}(`${n?"intro":"outro"}${e}`))}const q=new Set;let Y;function G(){Y={r:0,c:[],p:Y}}function J(){Y.r||r(Y.c),Y=Y.p}function K(t,n){t&&t.i&&(q.delete(t),t.i(n))}function Q(t,n,e,o){if(t&&t.o){if(q.has(t))return;q.add(t),Y.c.push((()=>{q.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}const X={duration:0};function Z(e,o,s,a){let c=o(e,s),l=a?0:1,m=null,h=null,g=null;function v(){g&&M(e,g)}function w(t,n){const e=t.b-l;return n*=Math.abs(e),{a:l,b:t.b,d:e,duration:n,start:t.start,end:t.start+n,group:t.group}}function $(o){const{delay:i=0,duration:s=300,easing:a=n,tick:$=t,css:y}=c||X,b={start:u()+i,b:o};o||(b.group=Y,Y.r+=1),m||h?h=b:(y&&(v(),g=D(e,l,o,s,i,a,y)),o&&$(0,1),m=w(b,s),R((()=>U(e,o,"start"))),function(t){let n;0===f.size&&d(p),new Promise((e=>{f.add(n={c:t,f:e})}))}((t=>{if(h&&t>h.start&&(m=w(h,s),h=null,U(e,m.b,"start"),y&&(v(),g=D(e,l,m.b,m.duration,0,a,c.css))),m)if(t>=m.end)$(l=m.b,1-l),U(e,m.b,"end"),h||(m.b?v():--m.group.r||r(m.group.c)),m=null;else if(t>=m.start){const n=t-m.start;l=m.a+m.d*a(n/m.duration),$(l,1-l)}return!(!m&&!h)})))}return{run(t){i(c)?(A||(A=Promise.resolve(),A.then((()=>{A=null}))),A).then((()=>{c=c(),$(t)})):$(t)},end(){v(),m=h=null}}}function tt(t,n){-1===t.$$.dirty[0]&&(P.push(t),O||(O=!0,N.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function nt(n,s,a,c,l,u,d,f=[-1]){const p=E;W(n);const m=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(p?p.$$.context:[])),callbacks:o(),dirty:f,skip_bound:!1,root:s.target||p.$$.root};d&&d(m.root);let h=!1;if(m.ctx=a?a(n,s.props||{},((t,e,...o)=>{const r=o.length?o[0]:e;return m.ctx&&l(m.ctx[t],m.ctx[t]=r)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](r),h&&tt(n,t)),e})):[],m.update(),h=!0,r(m.before_update),m.fragment=!!c&&c(m.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);m.fragment&&m.fragment.l(t),t.forEach(w)}else m.fragment&&m.fragment.c();s.intro&&K(n.$$.fragment),function(t,n,o,s){const{fragment:a,on_mount:c,on_destroy:l,after_update:u}=t.$$;a&&a.m(n,o),s||R((()=>{const n=c.map(e).filter(i);l?l.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(R)}(n,s.target,s.anchor,s.customElement),V()}W(p)}function et(t){const n=t-1;return n*n*n+1}function ot(t,{delay:n=0,duration:e=400,easing:o=et}={}){const r=getComputedStyle(t),i=+r.opacity,s=parseFloat(r.height),a=parseFloat(r.paddingTop),c=parseFloat(r.paddingBottom),l=parseFloat(r.marginTop),u=parseFloat(r.marginBottom),d=parseFloat(r.borderTopWidth),f=parseFloat(r.borderBottomWidth);return{delay:n,duration:e,easing:o,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*i};height: ${t*s}px;padding-top: ${t*a}px;padding-bottom: ${t*c}px;margin-top: ${t*l}px;margin-bottom: ${t*u}px;border-top-width: ${t*d}px;border-bottom-width: ${t*f}px;`}}const rt=async()=>{console.log("Registering service worker...");try{const t=await navigator.serviceWorker.register("sw.js",{scope:"./"});console.info("Registered service worker on "+t.scope)}catch(t){console.warn("Failed to register service worker: ",t)}},it=async()=>{if(navigator.serviceWorker&&!navigator.serviceWorker.controller){const t=new Promise((t=>navigator.serviceWorker.addEventListener("controllerchange",t,{once:!0}))),n=function(t,n){let e=-1;const o=new Promise(((o,r)=>{e=self.setTimeout((()=>r(n)),t)}));return{promise:o,cancel:()=>self.clearTimeout(e)}}(4e3,"SW ready timeout");await Promise.race([t,n.promise]),n.cancel()}},st=t=>{navigator.serviceWorker.controller.postMessage(t)},at=async()=>{const t=await(async()=>await window.showDirectoryPicker())();return await it(),st({type:"host-start"}),t},ct=async(t,n)=>{n&&!n.endsWith("/")&&(n+="/");let e=`\n<!DOCTYPE html>\n<html style="background-color:#DFCDC3;">\n${(t=>`<head>\n\t<meta charset="utf-8">\n\t<title>Directory listing for ${t||"/"}</title>\n</head>`)(n)}\n\n<body>\n  <main>\n  ${(t=>`<h1>Directory listing for ${t||"/"}</h1>`)(n)}\n\n  <div class="list">\n  ${(t=>"/"!=(t||"/")?'<div class="item go-up"><div class="icon">\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">\n  <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />\n</svg></div><div class="link"><a href="../">../</a></div></div>':"")(n)}\n  ${await(async t=>{let n="";for await(const[e,o]of t.entries()){const t="directory"===o.kind?"/":"",r="index.html"===e.toLowerCase();n+=`<div class="item ${r?"index":""}"><div class="icon">${"directory"===o.kind?'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">\n  <path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" />\n</svg>':r?'\n<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />\n</svg>':'\n<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />\n</svg>'}</div><div class="link"><a href="${e}${t}">${e}${t}</a></div></div>`}return n})(t)}\n  </div>\n  </main>\n</body>\n\n\n<style>\n    body { \n        display: grid;\n        justify-content: center;\n        justify-items: start;\n        background-color: #DFCDC3;\n        color: #333242;\n        box-sizing: border-box;\n    }\n\n    main {\n        width: 60ch;\n        max-width: 60ch;\n    }\n\n    .list { \n        display: grid;\n        justify-content: start;\n        justify-items: start;\n        padding: 4px;\n        grid-row-gap: 8px;\n    }\n\n    .item { \n        display: grid;\n        align-items: center;\n        justify-items: start;\n        grid-template-columns: 32px auto;\n        padding: 4px;\n    }\n\n    .go-up {\n        margin-bottom: 16px;\n    }\n\n    a {\n        color: #333242;\n        text-decoration: none;\n    }\n\n    .index {\n        font-weight: 600;\n        border: 1px dotted #333242;\n        background-color: #DCB454;\n    }\n    a:hover, .item:hover {\n        background-color: #DCB454;\n        color: #1F6435;\n    }\n\n    .icon {\n        margin-right:4px;\n    }\n    svg {\n        width: 24px;\n        height: 24px;\n    }\n</style>\n\n\n</html>`;return new Blob([e],{type:"text/html"})};function lt(t){let n,e,o,i,s,a,c,l,u;return{c(){n=$("button"),n.textContent="Open in new tab",o=b(),i=$("button"),s=y(t[7])},m(e,r){v(e,n,r),v(e,o,r),v(e,i,r),m(i,s),c=!0,l||(u=[x(n,"click",t[10]),x(i,"click",t[8])],l=!0)},p(t,n){(!c||128&n)&&j(s,t[7])},i(t){c||(R((()=>{e||(e=Z(n,ot,{},!0)),e.run(1)})),R((()=>{a||(a=Z(i,ot,{},!0)),a.run(1)})),c=!0)},o(t){e||(e=Z(n,ot,{},!1)),e.run(0),a||(a=Z(i,ot,{},!1)),a.run(0),c=!1},d(t){t&&w(n),t&&e&&e.end(),t&&w(o),t&&w(i),t&&a&&a.end(),l=!1,r(u)}}}function ut(t){let n,e,o,r,i,s,a=t[5]&&dt(t);return{c(){n=$("div"),e=$("div"),e.textContent="Server Information",o=b(),a&&a.c(),C(e,"cursor","pointer",!1),k(n,"class","server-information svelte-c4j8o8")},m(c,l){v(c,n,l),m(n,e),m(n,o),a&&a.m(n,null),r=!0,i||(s=x(e,"click",t[11]),i=!0)},p(t,e){t[5]?a?(a.p(t,e),32&e&&K(a,1)):(a=dt(t),a.c(),K(a,1),a.m(n,null)):a&&(G(),Q(a,1,1,(()=>{a=null})),J())},i(t){r||(K(a),r=!0)},o(t){Q(a),r=!1},d(t){t&&w(n),a&&a.d(),i=!1,s()}}}function dt(t){let n,e,o,r,i,s,a,c,l,u,d,f,p,h,g,x,C,_,E,F,D,M,W=t[1]?.name+"";return{c(){n=$("div"),e=$("div"),e.textContent="folderName",o=b(),r=$("div"),i=y(W),s=b(),a=$("div"),a.textContent="clientID",c=b(),l=$("div"),u=y(t[4]),d=b(),f=$("div"),f.textContent="swScope",p=b(),h=$("div"),g=y(t[3]),x=b(),C=$("div"),C.textContent="hostName",_=b(),E=$("div"),F=y(t[2]),k(e,"class","svelte-c4j8o8"),k(r,"class","svelte-c4j8o8"),k(a,"class","svelte-c4j8o8"),k(l,"class","svelte-c4j8o8"),k(f,"class","svelte-c4j8o8"),k(h,"class","svelte-c4j8o8"),k(C,"class","svelte-c4j8o8"),k(E,"class","svelte-c4j8o8"),k(n,"class","handled svelte-c4j8o8")},m(t,w){v(t,n,w),m(n,e),m(n,o),m(n,r),m(r,i),m(n,s),m(n,a),m(n,c),m(n,l),m(l,u),m(n,d),m(n,f),m(n,p),m(n,h),m(h,g),m(n,x),m(n,C),m(n,_),m(n,E),m(E,F),M=!0},p(t,n){(!M||2&n)&&W!==(W=t[1]?.name+"")&&j(i,W),(!M||16&n)&&j(u,t[4]),(!M||8&n)&&j(g,t[3]),(!M||4&n)&&j(F,t[2])},i(t){M||(R((()=>{D||(D=Z(n,ot,{},!0)),D.run(1)})),M=!0)},o(t){D||(D=Z(n,ot,{},!1)),D.run(0),M=!1},d(t){t&&w(n),t&&D&&D.end()}}}function ft(t){let n,e,o,r,i,s;return{c(){n=$("div"),e=$("iframe"),k(e,"title",o=t[1]?.name),k(e,"width","100%"),k(e,"height","100%"),c(e.src,r=`${t[3]}${t[2]}/`)||k(e,"src",r),k(n,"class","iframe svelte-c4j8o8")},m(t,o){v(t,n,o),m(n,e),s=!0},p(t,n){(!s||2&n&&o!==(o=t[1]?.name))&&k(e,"title",o),(!s||12&n&&!c(e.src,r=`${t[3]}${t[2]}/`))&&k(e,"src",r)},i(t){s||(R((()=>{i||(i=Z(n,ot,{},!0)),i.run(1)})),s=!0)},o(t){i||(i=Z(n,ot,{},!1)),i.run(0),s=!1},d(t){t&&w(n),t&&i&&i.end()}}}function pt(t){let n,e,o,r,i,s,a,c,l,u,d,f,p,h=t[1]&&lt(t),g=t[1]&&ut(t),y=t[0]&&ft(t);return{c(){n=$("main"),e=$("section"),o=$("header"),o.innerHTML='<h1>Svelte Serve Folder</h1> \n      <div class="version svelte-c4j8o8">Version: 0.0.6</div> \n      <div>Serve a local folder of files in your browser for easy testing without\n        having to run a server.</div>',r=b(),i=$("article"),s=$("div"),a=$("button"),a.textContent="Pick Folder",c=b(),h&&h.c(),l=b(),g&&g.c(),u=b(),y&&y.c(),k(o,"class","svelte-c4j8o8"),k(s,"class","buttons"),k(i,"class","svelte-c4j8o8"),k(e,"class","folder-handle svelte-c4j8o8"),k(n,"class","svelte-c4j8o8"),C(n,"grid-template-columns",t[6],!1)},m(w,$){v(w,n,$),m(n,e),m(e,o),m(e,r),m(e,i),m(i,s),m(s,a),m(s,c),h&&h.m(s,null),m(i,l),g&&g.m(i,null),m(n,u),y&&y.m(n,null),d=!0,f||(p=x(a,"click",t[9]),f=!0)},p(t,[e]){t[1]?h?(h.p(t,e),2&e&&K(h,1)):(h=lt(t),h.c(),K(h,1),h.m(s,null)):h&&(G(),Q(h,1,1,(()=>{h=null})),J()),t[1]?g?(g.p(t,e),2&e&&K(g,1)):(g=ut(t),g.c(),K(g,1),g.m(i,null)):g&&(G(),Q(g,1,1,(()=>{g=null})),J()),t[0]?y?(y.p(t,e),1&e&&K(y,1)):(y=ft(t),y.c(),K(y,1),y.m(n,null)):y&&(G(),Q(y,1,1,(()=>{y=null})),J()),64&e&&C(n,"grid-template-columns",t[6],!1)},i(t){d||(K(h),K(g),K(y),d=!0)},o(t){Q(h),Q(g),Q(y),d=!1},d(t){t&&w(n),h&&h.d(),g&&g.d(),y&&y.d(),f=!1,p()}}}function mt(t,n,e){let o,r,i=null,s="",a=null,c="";B((async()=>{await rt()})),window.addEventListener("unload",(()=>{st({type:"host-stop",hostName:s})})),navigator.serviceWorker.addEventListener("message",(t=>{switch(t.data.type){case"start-ok":n=t.data,e(2,s=n.hostName),e(3,a=n.scope),e(4,c=n.clientId);break;case"fetch":(async(t,n)=>{try{let e=decodeURIComponent(n.data.url);e.endsWith("/")&&(e=e.substr(0,e.length-1));const o=e.indexOf("?");-1!==o&&(e=e.substr(0,o));const r=e.split("/");let i=t;for(let t=0,n=r.length-1;t<n;++t){const n=r[t];i=await i.getDirectoryHandle(n)}let s=null;const a=r[r.length-1];if(a)try{const t=await i.getDirectoryHandle(a);s=await ct(t,e)}catch{const t=await i.getFileHandle(a);s=await t.getFile()}else s=await ct(i,e);n.data.port.postMessage({type:"ok",file:s})}catch(t){console.error(`Unable to serve file '${n.data.url}': `,t),n.data.port.postMessage({type:"not-found"})}})(i,t);break;default:console.warn(`Unknown message from SW '${t.data.type}'`)}var n}));let l=!1,u=!1;return t.$$.update=()=>{1&t.$$.dirty&&e(7,o=e(7,o=u?"Close iframe":"Open in iframe")),1&t.$$.dirty&&e(6,r=u?"448px calc(100vw - 480px)":"auto")},[u,i,s,a,c,l,r,o,function(){e(0,u=!u)},async()=>{e(1,i=await at())},()=>{globalThis.open(`${a}${s}/`,"_blank")},()=>e(5,l=!l)]}const ht=new class extends class{$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),nt(this,t,mt,pt,s,{})}}({target:document.body});return ht}();
//# sourceMappingURL=bundle.js.map
