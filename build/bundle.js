var app=function(){"use strict";function t(){}const n=t=>t;function e(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}let a;function c(t,n){return a||(a=document.createElement("a")),a.href=n,t===a.href}const l="undefined"!=typeof window;let d=l?()=>window.performance.now():()=>Date.now(),u=l?t=>requestAnimationFrame(t):t;const f=new Set;function p(t){f.forEach((n=>{n.c(t)||(f.delete(n),n.f())})),0!==f.size&&u(p)}function g(t,n){t.appendChild(n)}function m(t){if(!t)return document;const n=t.getRootNode?t.getRootNode():t.ownerDocument;return n&&n.host?n:t.ownerDocument}function h(t){const n=$("style");return function(t,n){g(t.head||t,n)}(m(t),n),n.sheet}function v(t,n,e){t.insertBefore(n,e||null)}function w(t){t.parentNode.removeChild(t)}function $(t){return document.createElement(t)}function y(t){return document.createTextNode(t)}function b(){return y(" ")}function x(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function k(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function _(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function C(t,n,e,o){null===e?t.style.removeProperty(n):t.style.setProperty(n,e,o?"important":"")}const E=new Map;let F,D=0;function M(t,n,e,o,r,i,s,a=0){const c=16.666/o;let l="{\n";for(let t=0;t<=1;t+=c){const o=n+(e-n)*i(t);l+=100*t+`%{${s(o,1-o)}}\n`}const d=l+`100% {${s(e,1-e)}}\n}`,u=`__svelte_${function(t){let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}(d)}_${a}`,f=m(t),{stylesheet:p,rules:g}=E.get(f)||function(t,n){const e={stylesheet:h(n),rules:{}};return E.set(t,e),e}(f,t);g[u]||(g[u]=!0,p.insertRule(`@keyframes ${u} ${d}`,p.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${u} ${o}ms linear ${r}ms 1 both`,D+=1,u}function j(t,n){const e=(t.style.animation||"").split(", "),o=e.filter(n?t=>t.indexOf(n)<0:t=>-1===t.indexOf("__svelte")),r=e.length-o.length;r&&(t.style.animation=o.join(", "),D-=r,D||u((()=>{D||(E.forEach((t=>{const{stylesheet:n}=t;let e=n.cssRules.length;for(;e--;)n.deleteRule(e);t.rules={}})),E.clear())})))}function W(t){F=t}function B(t){(function(){if(!F)throw new Error("Function called outside component initialization");return F})().$$.on_mount.push(t)}const P=[],S=[],T=[],L=[],N=Promise.resolve();let O=!1;function R(t){T.push(t)}const z=new Set;let A,H=0;function V(){const t=F;do{for(;H<P.length;){const t=P[H];H++,W(t),I(t.$$)}for(W(null),P.length=0,H=0;S.length;)S.pop()();for(let t=0;t<T.length;t+=1){const n=T[t];z.has(n)||(z.add(n),n())}T.length=0}while(P.length);for(;L.length;)L.pop()();O=!1,z.clear(),W(t)}function I(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(R)}}function U(t,n,e){t.dispatchEvent(function(t,n,e=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,e,!1,n),o}(`${n?"intro":"outro"}${e}`))}const q=new Set;let Y;function G(){Y={r:0,c:[],p:Y}}function J(){Y.r||r(Y.c),Y=Y.p}function K(t,n){t&&t.i&&(q.delete(t),t.i(n))}function Q(t,n,e,o){if(t&&t.o){if(q.has(t))return;q.add(t),Y.c.push((()=>{q.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}const X={duration:0};function Z(e,o,s,a){let c=o(e,s),l=a?0:1,g=null,m=null,h=null;function v(){h&&j(e,h)}function w(t,n){const e=t.b-l;return n*=Math.abs(e),{a:l,b:t.b,d:e,duration:n,start:t.start,end:t.start+n,group:t.group}}function $(o){const{delay:i=0,duration:s=300,easing:a=n,tick:$=t,css:y}=c||X,b={start:d()+i,b:o};o||(b.group=Y,Y.r+=1),g||m?m=b:(y&&(v(),h=M(e,l,o,s,i,a,y)),o&&$(0,1),g=w(b,s),R((()=>U(e,o,"start"))),function(t){let n;0===f.size&&u(p),new Promise((e=>{f.add(n={c:t,f:e})}))}((t=>{if(m&&t>m.start&&(g=w(m,s),m=null,U(e,g.b,"start"),y&&(v(),h=M(e,l,g.b,g.duration,0,a,c.css))),g)if(t>=g.end)$(l=g.b,1-l),U(e,g.b,"end"),m||(g.b?v():--g.group.r||r(g.group.c)),g=null;else if(t>=g.start){const n=t-g.start;l=g.a+g.d*a(n/g.duration),$(l,1-l)}return!(!g&&!m)})))}return{run(t){i(c)?(A||(A=Promise.resolve(),A.then((()=>{A=null}))),A).then((()=>{c=c(),$(t)})):$(t)},end(){v(),g=m=null}}}function tt(t,n){-1===t.$$.dirty[0]&&(P.push(t),O||(O=!0,N.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function nt(n,s,a,c,l,d,u,f=[-1]){const p=F;W(n);const g=n.$$={fragment:null,ctx:null,props:d,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(p?p.$$.context:[])),callbacks:o(),dirty:f,skip_bound:!1,root:s.target||p.$$.root};u&&u(g.root);let m=!1;if(g.ctx=a?a(n,s.props||{},((t,e,...o)=>{const r=o.length?o[0]:e;return g.ctx&&l(g.ctx[t],g.ctx[t]=r)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](r),m&&tt(n,t)),e})):[],g.update(),m=!0,r(g.before_update),g.fragment=!!c&&c(g.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);g.fragment&&g.fragment.l(t),t.forEach(w)}else g.fragment&&g.fragment.c();s.intro&&K(n.$$.fragment),function(t,n,o,s){const{fragment:a,on_mount:c,on_destroy:l,after_update:d}=t.$$;a&&a.m(n,o),s||R((()=>{const n=c.map(e).filter(i);l?l.push(...n):r(n),t.$$.on_mount=[]})),d.forEach(R)}(n,s.target,s.anchor,s.customElement),V()}W(p)}function et(t){const n=t-1;return n*n*n+1}function ot(t,{delay:n=0,duration:e=400,easing:o=et}={}){const r=getComputedStyle(t),i=+r.opacity,s=parseFloat(r.height),a=parseFloat(r.paddingTop),c=parseFloat(r.paddingBottom),l=parseFloat(r.marginTop),d=parseFloat(r.marginBottom),u=parseFloat(r.borderTopWidth),f=parseFloat(r.borderBottomWidth);return{delay:n,duration:e,easing:o,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*i};height: ${t*s}px;padding-top: ${t*a}px;padding-bottom: ${t*c}px;margin-top: ${t*l}px;margin-bottom: ${t*d}px;border-top-width: ${t*u}px;border-bottom-width: ${t*f}px;`}}const rt=async()=>{console.log("Registering service worker...");try{const t=await navigator.serviceWorker.register("sw.js",{scope:"./"});console.info("Registered service worker on "+t.scope)}catch(t){console.warn("Failed to register service worker: ",t)}},it=async()=>{if(navigator.serviceWorker&&!navigator.serviceWorker.controller){const t=new Promise((t=>navigator.serviceWorker.addEventListener("controllerchange",t,{once:!0}))),n=function(t,n){let e=-1;const o=new Promise(((o,r)=>{e=self.setTimeout((()=>r(n)),t)}));return{promise:o,cancel:()=>self.clearTimeout(e)}}(4e3,"SW ready timeout");await Promise.race([t,n.promise]),n.cancel()}},st=t=>{navigator.serviceWorker.controller.postMessage(t)},at=async()=>{const t=await(async()=>await window.showDirectoryPicker())();return await it(),st({type:"host-start"}),t},ct=async(t,n)=>{n&&!n.endsWith("/")&&(n+="/");let e=`\n<!DOCTYPE html>\n<html>\n${(t=>`<head>\n\t<meta charset="utf-8">\n\t<title>Directory listing for ${t||"/"}</title>\n</head>`)(n)}\n\n<body>\n  <main>\n  ${(t=>`<h1>Directory listing for ${t||"/"}</h1>`)(n)}\n\n  <div class="list">\n  ${(t=>"/"!=(t||"/")?'<div class="item go-up"><div class="icon">\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">\n  <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />\n</svg></div><div class="link"><a href="../">../</a></div></div>':"")(n)}\n  ${await(async t=>{let n="";for await(const[e,o]of t.entries()){const t="directory"===o.kind?"/":"",r="index.html"===e.toLowerCase();n+=`<div class="item ${r?"index":""}"><div class="icon">${"directory"===o.kind?'\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">\n  <path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" />\n</svg>':r?'\n<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />\n</svg>':'\n<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />\n</svg>'}</div><div class="link"><a href="${e}${t}">${e}${t}</a></div></div>`}return n})(t)}\n  </div>\n  </main>\n</body>\n\n\n<style>\n    body { \n        display: grid;\n        justify-content: center;\n        justify-items: start;\n        background-color: #DFCDC3;\n        color: #333242;\n        box-sizing: border-box;\n    }\n\n    main {\n        width: 60ch;\n        max-width: 60ch;\n    }\n\n    .list { \n        display: grid;\n        justify-content: start;\n        justify-items: start;\n        padding: 4px;\n        grid-row-gap: 8px;\n    }\n\n    .item { \n        display: grid;\n        align-items: center;\n        justify-items: start;\n        grid-template-columns: 32px auto;\n        padding: 4px;\n    }\n\n    .go-up {\n        margin-bottom: 16px;\n    }\n\n    a {\n        color: #333242;\n        text-decoration: none;\n    }\n\n    .index {\n        font-weight: 600;\n        border: 1px dotted #333242;\n        background-color: #DCB454;\n    }\n    a:hover, .item:hover {\n        background-color: #DCB454;\n        color: #1F6435;\n    }\n\n    .icon {\n        margin-right:4px;\n    }\n    svg {\n        width: 24px;\n        height: 24px;\n    }\n</style>\n\n\n</html>`;return new Blob([e],{type:"text/html"})};function lt(n){let e,o,i,s,a,c,l,d;return{c(){e=$("button"),e.textContent="Open in new tab",i=b(),s=$("button"),s.textContent="Open in iframe"},m(t,o){v(t,e,o),v(t,i,o),v(t,s,o),c=!0,l||(d=[x(e,"click",n[9]),x(s,"click",n[7])],l=!0)},p:t,i(t){c||(R((()=>{o||(o=Z(e,ot,{},!0)),o.run(1)})),R((()=>{a||(a=Z(s,ot,{},!0)),a.run(1)})),c=!0)},o(t){o||(o=Z(e,ot,{},!1)),o.run(0),a||(a=Z(s,ot,{},!1)),a.run(0),c=!1},d(t){t&&w(e),t&&o&&o.end(),t&&w(i),t&&w(s),t&&a&&a.end(),l=!1,r(d)}}}function dt(t){let n,e,o,r,i,s,a=t[5]&&ut(t);return{c(){n=$("div"),e=$("div"),e.textContent="Server Information",o=b(),a&&a.c(),C(e,"cursor","pointer",!1),k(n,"class","server-information svelte-7odgrc")},m(c,l){v(c,n,l),g(n,e),g(n,o),a&&a.m(n,null),r=!0,i||(s=x(e,"click",t[10]),i=!0)},p(t,e){t[5]?a?(a.p(t,e),32&e&&K(a,1)):(a=ut(t),a.c(),K(a,1),a.m(n,null)):a&&(G(),Q(a,1,1,(()=>{a=null})),J())},i(t){r||(K(a),r=!0)},o(t){Q(a),r=!1},d(t){t&&w(n),a&&a.d(),i=!1,s()}}}function ut(t){let n,e,o,r,i,s,a,c,l,d,u,f,p,m,h,x,C,E,F,D,M,j,W=t[1]?.name+"";return{c(){n=$("div"),e=$("div"),e.textContent="folderName",o=b(),r=$("div"),i=y(W),s=b(),a=$("div"),a.textContent="clientID",c=b(),l=$("div"),d=y(t[4]),u=b(),f=$("div"),f.textContent="swScope",p=b(),m=$("div"),h=y(t[3]),x=b(),C=$("div"),C.textContent="hostName",E=b(),F=$("div"),D=y(t[2]),k(e,"class","svelte-7odgrc"),k(r,"class","svelte-7odgrc"),k(a,"class","svelte-7odgrc"),k(l,"class","svelte-7odgrc"),k(f,"class","svelte-7odgrc"),k(m,"class","svelte-7odgrc"),k(C,"class","svelte-7odgrc"),k(F,"class","svelte-7odgrc"),k(n,"class","handled svelte-7odgrc")},m(t,w){v(t,n,w),g(n,e),g(n,o),g(n,r),g(r,i),g(n,s),g(n,a),g(n,c),g(n,l),g(l,d),g(n,u),g(n,f),g(n,p),g(n,m),g(m,h),g(n,x),g(n,C),g(n,E),g(n,F),g(F,D),j=!0},p(t,n){(!j||2&n)&&W!==(W=t[1]?.name+"")&&_(i,W),(!j||16&n)&&_(d,t[4]),(!j||8&n)&&_(h,t[3]),(!j||4&n)&&_(D,t[2])},i(t){j||(R((()=>{M||(M=Z(n,ot,{},!0)),M.run(1)})),j=!0)},o(t){M||(M=Z(n,ot,{},!1)),M.run(0),j=!1},d(t){t&&w(n),t&&M&&M.end()}}}function ft(t){let n,e,o,r;return{c(){n=$("div"),e=$("iframe"),k(e,"title",o=t[1]?.name),k(e,"width","100%"),k(e,"height","100%"),c(e.src,r=`${t[3]}${t[2]}/`)||k(e,"src",r),k(n,"class","iframe svelte-7odgrc")},m(t,o){v(t,n,o),g(n,e)},p(t,n){2&n&&o!==(o=t[1]?.name)&&k(e,"title",o),12&n&&!c(e.src,r=`${t[3]}${t[2]}/`)&&k(e,"src",r)},d(t){t&&w(n)}}}function pt(t){let n,e,o,r,i,s,a,c,l,d,u,f,p,m=t[1]&&lt(t),h=t[1]&&dt(t),y=t[0]&&ft(t);return{c(){n=$("main"),e=$("section"),o=$("header"),o.innerHTML='<h1>Svelte Serve Folder</h1> \n      <div class="version svelte-7odgrc">Version: 0.0.6</div> \n      <div>Serve a local folder of files in your browser for easy testing without\n        having to run a server.</div>',r=b(),i=$("article"),s=$("div"),a=$("button"),a.textContent="Pick Folder",c=b(),m&&m.c(),l=b(),h&&h.c(),d=b(),y&&y.c(),k(o,"class","svelte-7odgrc"),k(s,"class","buttons"),k(i,"class","svelte-7odgrc"),k(e,"class","folder-handle svelte-7odgrc"),k(n,"class","svelte-7odgrc"),C(n,"grid-template-columns",t[6],!1)},m(w,$){v(w,n,$),g(n,e),g(e,o),g(e,r),g(e,i),g(i,s),g(s,a),g(s,c),m&&m.m(s,null),g(i,l),h&&h.m(i,null),g(n,d),y&&y.m(n,null),u=!0,f||(p=x(a,"click",t[8]),f=!0)},p(t,[e]){t[1]?m?(m.p(t,e),2&e&&K(m,1)):(m=lt(t),m.c(),K(m,1),m.m(s,null)):m&&(G(),Q(m,1,1,(()=>{m=null})),J()),t[1]?h?(h.p(t,e),2&e&&K(h,1)):(h=dt(t),h.c(),K(h,1),h.m(i,null)):h&&(G(),Q(h,1,1,(()=>{h=null})),J()),t[0]?y?y.p(t,e):(y=ft(t),y.c(),y.m(n,null)):y&&(y.d(1),y=null),64&e&&C(n,"grid-template-columns",t[6],!1)},i(t){u||(K(m),K(h),u=!0)},o(t){Q(m),Q(h),u=!1},d(t){t&&w(n),m&&m.d(),h&&h.d(),y&&y.d(),f=!1,p()}}}function gt(t,n,e){let o,r=null,i="",s=null,a="";B((async()=>{await rt()})),window.addEventListener("unload",(()=>{st({type:"host-stop",hostName:i})})),navigator.serviceWorker.addEventListener("message",(t=>{switch(t.data.type){case"start-ok":n=t.data,e(2,i=n.hostName),e(3,s=n.scope),e(4,a=n.clientId);break;case"fetch":(async(t,n)=>{try{let e=decodeURIComponent(n.data.url);e.endsWith("/")&&(e=e.substr(0,e.length-1));const o=e.indexOf("?");-1!==o&&(e=e.substr(0,o));const r=e.split("/");let i=t;for(let t=0,n=r.length-1;t<n;++t){const n=r[t];i=await i.getDirectoryHandle(n)}let s=null;const a=r[r.length-1];if(a)try{const t=await i.getDirectoryHandle(a);s=await ct(t,e)}catch{const t=await i.getFileHandle(a);s=await t.getFile()}else s=await ct(i,e);n.data.port.postMessage({type:"ok",file:s})}catch(t){console.error(`Unable to serve file '${n.data.url}': `,t),n.data.port.postMessage({type:"not-found"})}})(r,t);break;default:console.warn(`Unknown message from SW '${t.data.type}'`)}var n}));let c=!1,l=!1;return t.$$.update=()=>{1&t.$$.dirty&&e(6,o=l?"448px calc(100vw - 480px)":"auto")},[l,r,i,s,a,c,o,function(){e(0,l=!0)},async()=>{e(1,r=await at())},()=>{globalThis.open(`${s}${i}/`,"_blank")},()=>e(5,c=!c)]}const mt=new class extends class{$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),nt(this,t,gt,pt,s,{})}}({target:document.body});return mt}();
//# sourceMappingURL=bundle.js.map
